<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>iPhone-style Mobile UI Â· Concept-alike</title>
  <!-- Google Maps API: callback ì œê±° (ì§ì ‘ í˜¸ì¶œ) -->
  <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAxlcBbyxBP7TttzXGzoSIdbLFQ_5u6qtk"></script>
  <style>
    :root{
      --page-bg:url('images/bg_image.png');
      --device-scale: 0.8;
      --brand:#0a84ff;
      --glass: rgba(255,255,255,.65);
      --ink:#0b1220;
      --ink-mute:#6b7280;
      --ring: rgba(255,255,255,.08);
      --badge:#ff3b30;
      --tile:#0e1422;
      --bg-deep:#0a0f1a;
    }

    html,body{ height:100%; margin:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial; background:#0b0f17; color:#e5e7eb; }

    /* ===== Stage (ì›¹ ë°°ê²½ + íœ´ëŒ€í°) ===== */
    .stage {
      min-height: 100dvh;
      display: grid;
      place-items: center;
      padding: clamp(12px, 3vw, 28px);
      overflow: hidden;
      position: relative;
      isolation: isolate; /* ::beforeê°€ ë¶€ëª¨ ì•ˆì— ë¨¸ë¬¼ë„ë¡ ê²½ê³„ ì„¤ì • */
    }

    .stage::before {
      content: "";
      position: absolute;
      inset: -20px; /* ë¸”ëŸ¬ íš¨ê³¼ê°€ í¼ì ¸ë‚˜ê°ˆ ì—¬ìœ  ê³µê°„ í™•ë³´ */
      background: var(--page-bg) center top / 120% no-repeat;
      filter: blur(8px); /* ë¸”ëŸ¬ ê°•ë„ ì¡°ì ˆ ê°€ëŠ¥ */
      z-index: -1; /* ì´ì œ .stage ì•ˆì—ì„œë§Œ ë’¤ë¡œ ê° */
    }

    .device-wrap{ 
      transform: scale(var(--device-scale)); 
      filter: drop-shadow(0 26px 38px rgba(0,0,0,.45)); 
      position:relative; 
      z-index: 1; /* ë°°ê²½ë³´ë‹¤ í™•ì‹¤íˆ ìœ„ì— ìˆë„ë¡ ëª…ì‹œ */
      margin-top: 5vh;
    }

    /* ===== iPhone frame ===== */
    .iphone{ position:relative; width:390px; height:844px; border-radius:56px; padding:18px; background:linear-gradient(180deg,#0f1115,#151821); border:10px solid #0e1117; }
    .iphone:before{ content:""; position:absolute; inset:-10px; border-radius:64px; background:linear-gradient(135deg, rgba(255,255,255,.14), rgba(255,255,255,0) 40%); -webkit-mask:linear-gradient(#000,#000) content-box,linear-gradient(#000,#000); -webkit-mask-composite:xor; mask-composite:exclude; padding:10px; pointer-events:none; opacity:.85; }
    .island{ position:absolute; top:12px; left:50%; transform:translateX(-50%); width:120px; height:36px; background:#000; border-radius:20px; z-index:5; box-shadow:0 1px 0 rgba(255,255,255,.08) inset; }
    .screen{ position:relative; height:100%; border-radius:38px; overflow:hidden; background:radial-gradient(120% 120% at 50% -20%, #2a3a7a, #0b0f17 60%); box-shadow: inset 0 0 0 1px rgba(255,255,255,.06); }

    /* ===== Status bar ===== */
    .statusbar{ position:absolute; top:8px; left:0; right:0; display:flex; justify-content:space-between; padding:8px 16px; color:#fff; font-weight:600; font-size:12px; z-index:4; text-shadow:0 1px 1px rgba(0,0,0,.6); }

    /* ===== Lock screen ===== */
    .lock{ position:absolute; inset:0; color:#fff; background:url('public\images\lockscreen-bg.jpg') center/cover no-repeat; display:flex; flex-direction:column; align-items:center; }
    .lock .clock{ margin-top:120px; font-size:92px; font-weight:300; letter-spacing:1px; line-height:.9; text-shadow:0 6px 24px rgba(0,0,0,.45); }
    .lock .date{ margin-top:8px; font-size:14px; opacity:.95; text-shadow:0 2px 8px rgba(0,0,0,.45); }

    /* ì•Œë¦¼: ê³ ì • ë†’ì´ + ìŠ¤í¬ë¡¤ + í˜ì´ë“œ ë§ˆìŠ¤í¬ */
    .lock .notif-wrap{ position:absolute; left:0; right:0; top:280px; bottom:80px; padding:0 16px; }
    .lock .notif-stack{ height:100%; overflow:auto; padding:2px 2px 10px; mask-image: linear-gradient(transparent, #000 8%, #000 92%, transparent); }
    .notif{ background:rgba(255,255,255,.9); color:#111; border-radius:16px; padding:12px 14px; display:grid; gap:2px; box-shadow:0 6px 18px rgba(0,0,0,.25); margin:10px 6px; }
    .notif .t{ font-weight:700; font-size:13px; }
    .notif .d{ font-size:12px; color:#374151; }

    .lock .hint{ position:absolute; bottom:18px; left:0; right:0; text-align:center; font-size:12px; opacity:.9; }

    /* ===== Home ===== */
    .home{ position:absolute; inset:0; display:flex; flex-direction:column; padding:64px 18px 24px; color:#fff; background:url('https://images.unsplash.com/photo-1520975922284-7b5168a6df4a?q=80&w=1600&auto=format&fit=crop') center/cover no-repeat; }
    .home[hidden]{ display:none !important; } /* hidden ì†ì„± ê°•ì œ ì ìš© */
    .search-pill{ align-self:center; margin-top:auto; margin-bottom:98px; padding:8px 14px; border-radius:999px; background:rgba(255,255,255,.18); backdrop-filter:blur(8px); font-size:12px; color:#e5e7eb; }
    .home .grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-top:14px; }
    .app-tile{ display:flex; flex-direction:column; align-items:center; gap:6px; background:none; border:none; cursor:pointer; color:#fff; }
    .icon{ position:relative; width:64px; height:64px; border-radius:18px; display:grid; place-items:center; font-size:26px; box-shadow: inset 0 -10px 30px rgba(0,0,0,.28), 0 6px 12px rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.08); }
    .icon span{ display:none; }
    .label{ font-size:11px; text-shadow:0 2px 8px rgba(0,0,0,.6); }
    .badge{ position:absolute; top:-4px; right:-4px; background:var(--badge); color:#fff; font-weight:800; height:20px; min-width:20px; padding:0 6px; display:grid; place-items:center; border-radius:999px; font-size:11px; box-shadow:0 2px 6px rgba(0,0,0,.35); }

    .i-cal{ background:linear-gradient(160deg,#ffffff,#f3f4f6); color:#111; }
    .i-photos{ background:linear-gradient(160deg,#60a5fa,#22d3ee); }
    .i-notes{ background:linear-gradient(160deg,#fff3a3,#ffd54f); color:#111; }
    .i-web{ background:linear-gradient(160deg,#ff6b6b,#f43f5e); }
    .i-maps{ background:linear-gradient(160deg,#34d399,#10b981); }
    .i-tv{ background:linear-gradient(160deg,#6366f1,#4338ca); }
    .i-ft{ background:linear-gradient(160deg,#22c55e,#16a34a); }
    .i-settings{ background:linear-gradient(160deg,#9ca3af,#6b7280); }
    .i-bom{ background:linear-gradient(160deg,#ff4dc8,#ff2e93); }

    .dock{ position:absolute; left:18px; right:18px; bottom:18px; padding:14px; border-radius:28px; background:rgba(255,255,255,.16); backdrop-filter:blur(10px); display:grid; grid-template-columns:repeat(2,1fr); gap:14px; }

    /* ===== App screens (modals) ===== */
    .app-screen{ position:absolute; inset:0; background:rgba(0,0,0,.35); display:none; align-items:center; justify-content:center; padding:18px; }
    .app{ width:min(360px,92%); max-height:86%; background:#0a0f1a; border-radius:28px; overflow:hidden; border:1px solid rgba(255,255,255,.08); display:flex; flex-direction:column; box-shadow:0 10px 40px rgba(0,0,0,.5); }
    .app .bar{ flex-shrink: 0; display:flex; align-items:center; gap:10px; padding:12px 14px; background:#0e1422; border-bottom:1px solid rgba(255,255,255,.06); }
    .app .body{ flex-grow: 1; overflow:auto; padding:14px; }
    .app .title{ font-weight:700; font-size:14px; }
    .spacer{ flex:1; }
    .x{ background:none; border:none; color:#9ca3af; font-weight:900; cursor:pointer; font-size:20px; }
    
    /* ì§€ë„ ì•±ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ ìˆ˜ì • */
    #app-map .body {
      padding: 0; /* ì§€ë„ê°€ ê½‰ ì°¨ë„ë¡ íŒ¨ë”© ì œê±° */
    }
    #map-canvas {
      width: 100%;
      height: 100%;
    }

    .chat{ display:grid; gap:8px; }
    .bubble{ max-width:80%; padding:10px 12px; border-radius:18px; }
    .bubble.me{ justify-self:end; background:#0b84ff; color:#fff; border-bottom-right-radius:6px; }
    .bubble.other{ justify-self:start; background:#1f2937; color:#e5e7eb; border-bottom-left-radius:6px; }
    .attach{ border-radius:12px; background:#0f172a; padding:10px; border:1px dashed #374151; font-size:12px; color:#94a3b8; }

    .cal{ display:grid; gap:10px; }
    .cal .month{ display:flex; justify-content:space-between; align-items:center; font-weight:700; }
    .cal .grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:6px; }
    .day{ background:#0d1424; border:1px solid rgba(255,255,255,.06); border-radius:10px; padding:8px; min-height:42px; display:flex; align-items:flex-start; justify-content:flex-end; font-size:12px; color:#cbd5e1; position:relative; }
    .day.mark{ outline:2px solid #f59e0b; outline-offset:-2px; }
    .day.range{ background:linear-gradient(0deg, rgba(245,158,11,.35), rgba(245,158,11,.18)); }
    .pop-label{ position:absolute; bottom:6px; left:6px; right:6px; background:#f59e0b; color:#111; border-radius:6px; padding:2px 6px; font-weight:800; font-size:10px; text-align:center; }

    .gallery-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:6px; }
    .gallery-grid img{ width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; cursor:pointer; }
    .lightbox{ position:fixed; inset:0; background:rgba(0,0,0,.85); display:none; align-items:center; justify-content:center; z-index:50; }
    .lightbox img{ max-width:88vw; max-height:88vh; border-radius:12px; }

    .noise{ width:100%; aspect-ratio:16/9; border-radius:14px; background: repeating-linear-gradient(0deg,#111 0,#111 2px,#1a1a1a 2px,#1a1a1a 4px); display:grid; place-items:center; color:#cbd5e1; font-weight:800; letter-spacing:.1em; }
    
    .video {
      width: 100%;
      aspect-ratio: 16/9;
      border-radius: 14px;
      border: none; /* iframe í…Œë‘ë¦¬ ì œê±° */
    }

    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    /* ===== Unlock animation ===== */
    @keyframes unlockUp { from { transform: translateY(0); opacity:1; } to { transform: translateY(-40px); opacity:0; } }
    @keyframes homeIn { from { opacity:0; transform: scale(.98); filter: blur(2px); } to { opacity:1; transform: scale(1); filter: blur(0); } }
    .lock.unlocking{ animation: unlockUp .35s ease both; }
    .home.show{ animation: homeIn .35s ease both; }
     /* ===== Share Button & Modal ===== */
    .share-btn {
      position: absolute;
      bottom: 30px;
      left: 30px;
      width: 48px;
      height: 48px;
      background: rgba(255, 255, 255, .2);
      border: 1px solid rgba(255,255,255,.1);
      border-radius: 50%;
      font-size: 20px;
      color: #fff;
      cursor: pointer;
      display: grid;
      place-items: center;
      z-index: 10;
    }

    .share-modal-overlay {
      position: fixed; /* ì „ì²´ í™”ë©´ì„ ë®ê¸° ìœ„í•´ fixed ì‚¬ìš© */
      inset: 0;
      background: rgba(0, 0, 0, .4);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px); /* Safari ë¸Œë¼ìš°ì € í˜¸í™˜ì„± */
      z-index: 100;
      display: none; /* í‰ì†Œì—” ìˆ¨ê²¨ë‘  */
      align-items: center;
      justify-content: center;
    }

    .share-box {
      background: #1f2937;
      padding: 28px;
      border-radius: 20px;
      text-align: center;
      position: relative;
      border: 1px solid rgba(255,255,255,.1);
      box-shadow: 0 10px 30px rgba(0,0,0,.3);
    }

    .share-box p {
      margin: 0 0 16px;
      font-weight: 700;
      font-size: 14px;
      color: #e5e7eb;
    }

    .share-link svg {
      width: 50px;
      height: 50px;
      fill: #fff; /* SVG ì•„ì´ì½˜ ìƒ‰ìƒ */
      transition: transform .2s ease;
    }
    .share-link:hover svg {
        transform: scale(1.1);
    }

    .close-share {
      position: absolute;
      top: 8px;
      right: 12px;
      background: none;
      border: none;
      color: #9ca3af;
      font-size: 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="stage">
    <button class="share-btn" id="shareBtn">ğŸ”—</button>

    <div class="device-wrap">
      <div class="iphone" role="region" aria-label="iPhone mockup">
        <div class="island" aria-hidden="true"></div>
        <div class="screen">

          <!-- Status bar -->
          <div class="statusbar">
            <div id="sb-time">9:41</div>
            <div>LTE â€¢ ğŸ”‹ 100%</div>
          </div>

          <!-- ===== LOCK ===== -->
          <section class="lock" id="lock">
            <div class="clock" id="lock-clock">9:41</div>
            <div class="date" id="lock-date">2025ë…„ 04ì›” 01ì¼ (í™”)</div>

            <!-- ì•Œë¦¼: ìŠ¤í¬ë¡¤ ì˜ì—­ -->
            <div class="notif-wrap">
              <div class="notif-stack" id="notifStack" aria-label="ì•Œë¦¼ ëª©ë¡ (ìŠ¤í¬ë¡¤ ê°€ëŠ¥)"></div>
            </div>

            <div class="hint">ì•Œë¦¼ ì™¸ ì˜ì—­ íƒ­ ë˜ëŠ” ìœ„ë¡œ ìŠ¤ì™€ì´í”„ â†’ í™ˆ í™”ë©´</div>
          </section>

          <!-- ===== HOME ===== -->
          <section class="home" id="home" hidden>
            <div class="home-top"></div>
            <div class="grid">
              <button class="app-tile" data-app="cal"><div class="icon i-cal">ğŸ“…</div><div class="label">Calendar</div></button>
              <button class="app-tile" data-app="gallery"><div class="icon i-photos">ğŸ–¼ï¸</div><div class="label">Photos</div></button>
              <button class="app-tile" data-app="note"><div class="icon i-notes">ğŸ“<span class="badge">1</span></div><div class="label">Notes</div></button>
              <button class="app-tile" data-app="web"><div class="icon i-web">ğŸ“°</div><div class="label">Web</div></button>

              <button class="app-tile" data-app="map"><div class="icon i-maps">ğŸ—ºï¸</div><div class="label">Maps</div></button>
              <button class="app-tile" data-app="ott"><div class="icon i-tv">ğŸ“º</div><div class="label">BOM TV</div></button>
              <button class="app-tile" data-app="ft"><div class="icon i-ft">ğŸ“¹</div><div class="label">FaceTime</div></button>
              <button class="app-tile" data-app="settings"><div class="icon i-settings">âš™ï¸</div><div class="label">Settings</div></button>

              <button class="app-tile" data-app="bom"><div class="icon i-bom">B</div><div class="label">ë´„í†¤</div></button>
            </div>

            <div class="dock">
              <button class="app-tile" data-app="phone"><div class="icon i-ft">ğŸ“</div></button>
              <button class="app-tile" data-app="msg"><div class="icon i-ft">ğŸ’¬</div></button>
            </div>
            <div class="search-pill">âŒ˜ Search</div>
          </section>

          <!-- ===== Apps (modals) ===== -->
          <div class="app-screen" id="app-msg">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">í†¡ (ì½ê¸° ì „ìš©)</div><span class="spacer"></span></div>
              <div class="body">
                <div class="chat">
                  <div class="bubble other">[ê³µì§€] ì‹œì¦Œê·¸ë¦¬íŒ… ì¼ì • ê³µê°œ! 04/01 í‹°ì €, 04/23~26 POP-UP</div>
                  <div class="bubble me">ë§í¬ëŠ” ì–´ë””ì„œ í™•ì¸í•´ìš”?</div>
                  <div class="bubble other">ì›¹(Web) ì•±ì—ì„œ ì´ë™ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
                  <div class="attach">ì´ë¯¸ì§€/ë§í¬ ì²¨ë¶€ ë¯¸ë¦¬ë³´ê¸° (ìƒí˜¸ì‘ìš© ë¹„í™œì„±)</div>
                </div>
              </div>
            </div>
          </div>

          <div class="app-screen" id="app-cal">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">Calendar Â· 2025ë…„ 4ì›”</div><span class="spacer"></span></div>
              <div class="body">
                <div class="cal">
                  <div class="month"> <span>April 2025</span> <span>9:41 AM</span></div>
                  <div class="grid">
                    <div class="day"></div><div class="day"></div><div class="day">1</div><div class="day">2</div><div class="day">3</div><div class="day">4</div><div class="day">5</div>
                    <div class="day">6</div><div class="day">7</div><div class="day">8</div><div class="day">9</div><div class="day">10</div><div class="day">11</div><div class="day">12</div>
                    <div class="day">13</div><div class="day">14</div><div class="day">15</div><div class="day">16</div><div class="day">17</div><div class="day">18</div><div class="day">19</div>
                    <div class="day mark">20</div><div class="day">21</div><div class="day">22</div><div class="day range">23</div><div class="day range">24</div><div class="day range">25</div><div class="day range">26<div class="pop-label">POP-UP</div></div>
                    <div class="day">27</div><div class="day">28</div><div class="day">29</div><div class="day">30</div><div class="day"></div><div class="day"></div><div class="day"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="app-screen" id="app-web">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">Web Â· êµ¬ë§¤/ì˜ˆì•½</div><span class="spacer"></span></div>
              <div class="body">
                <div class="list">
                  <a class="card" href="#" data-link="shop" target="_blank" style="display:block; padding:12px; border-radius:14px; background:#0d1424; border:1px solid rgba(255,255,255,.06); text-decoration:none; color:#e5e7eb"><strong>êµ¿ì¦ˆ ìŠ¤í† ì–´ (ì¬ì´ë¯¸ìƒµ)</strong><div class="muted" style="color:#9ca3af; font-size:12px">ìƒˆ íƒ­ìœ¼ë¡œ ì´ë™</div></a>
                  <a class="card" href="#" data-link="popup" target="_blank" style="display:block; padding:12px; border-radius:14px; background:#0d1424; border:1px solid rgba(255,255,255,.06); text-decoration:none; color:#e5e7eb"><strong>íŒì—… ì˜ˆì•½</strong><div class="muted" style="color:#9ca3af; font-size:12px">ìƒˆ íƒ­ìœ¼ë¡œ ì´ë™</div></a>
                </div>
              </div>
            </div>
          </div>

          <div class="app-screen" id="app-gallery">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">ê°¤ëŸ¬ë¦¬ Â· ë³´ê´€í•¨</div><span class="spacer"></span></div>
              <div class="body">
                <div class="gallery-grid" id="ggrid">
                  <img src="https://images.unsplash.com/photo-1520975922284-7b5168a6df4a?q=80&w=600&auto=format&fit=crop" alt="ì»·1" />
                  <img src="https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=600&auto=format&fit=crop" alt="ì»·2" />
                  <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=600&auto=format&fit=crop" alt="ì»·3" />
                  <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=600&auto=format&fit=crop" alt="ì»·4" />
                  <img src="https://images.unsplash.com/photo-1549880338-65ddcdfd017b?q=80&w=600&auto=format&fit=crop" alt="ì»·5" />
                  <img src="https://images.unsplash.com/photo-1520975922284-7b5168a6df4a?q=80&w=600&auto=format&fit=crop" alt="ì»·6" />
                </div>
              </div>
            </div>
          </div>
          <div class="lightbox" id="lightbox"><img alt="preview" id="lightimg" /></div>

          <div class="app-screen" id="app-ott">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">BOM TV</div><span class="spacer"></span></div>
              <div class="body">
                <div id="pvBefore" class="noise">æº–å‚™ä¸­</div>
                <iframe id="pvAfter" class="video" style="display:none;" src="https://www.youtube-nocookie.com/embed/Q-6hVfCovKs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                <div class="muted" style="margin-top:10px; font-size:12px; color:#9ca3af">PV ê³µê°œ ì „ì—ëŠ” ë…¸ì´ì¦ˆ í™”ë©´, ê³µê°œ í›„ì—ëŠ” ì˜ìƒìœ¼ë¡œ ìë™ ì „í™˜(ë³€ìˆ˜ë¡œ ì œì–´)</div>
              </div>
            </div>
          </div>

          <div class="app-screen" id="app-note">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">ë©”ëª¨ì¥ (íŒíŠ¸)</div><span class="spacer"></span></div>
              <div class="body">
                <div class="card" style="padding:12px; border-radius:12px; background:#0d1424; border:1px solid rgba(255,255,255,.06)"><strong>ì•”í˜¸</strong><div class="muted" style="color:#9ca3af; font-size:12px">ë‹¬ë ¥ì˜ ë¶‰ì€ ë‚ ì„ ì´ì–´ì„œ ì½ì–´ë³´ì„¸ìš”.</div></div>
              </div>
            </div>
          </div>

          <div class="app-screen" id="app-map">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">ì§€ë„</div><span class="spacer"></span></div>
              <div class="body">
                <!-- ì§€ë„ê°€ ê·¸ë ¤ì§ˆ ì˜ì—­ -->
                <div id="map-canvas"></div>
              </div>
            </div>
          </div>

          <div class="app-screen" id="app-ft">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">FaceTime</div><span class="spacer"></span></div>
              <div class="body">
                <div class="video">ì…€ì¹´ í˜•íƒœì˜ PV ì»· ì‚½ì… ì˜ì—­</div>
              </div>
            </div>
          </div>

          <div class="app-screen" id="app-settings">
            <div class="app">
              <div class="bar"><button class="x" data-close>âœ•</button><div class="title">Settings</div><span class="spacer"></span></div>
              <div class="body">
                <div class="list" style="display:grid; gap:10px;">
                  <label class="card" style="display:flex; align-items:center; gap:10px; padding:12px; border-radius:12px; background:#0d1424; border:1px solid rgba(255,255,255,.06)">
                    <input type="checkbox" id="pvToggle" /> <span>PV ê³µê°œë¨ (ì²´í¬ ì‹œ ì˜ìƒ í‘œì‹œ)</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

        </div><!-- /screen -->
      </div>
    </div>
  </div>

  <!-- ===== Share Modal ===== -->
  <div class="share-modal-overlay" id="shareModal">
    <div class="share-box">
        <p>ì´ í˜ì´ì§€ ê³µìœ í•˜ê¸°</p>
        <a href="#" id="shareTwitter" class="share-link" title="X(íŠ¸ìœ„í„°)ì— ê³µìœ ">
            <svg viewBox="0 0 24 24" aria-hidden="true">
                <path fill="currentColor" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
            </svg>
        </a>
        <button class="close-share" id="closeShareBtn">âœ•</button>
    </div>
  </div>

  <script>
    // ì „ì—­ ë³€ìˆ˜ë¡œ ì§€ë„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬
    window.mapInstance = null;

    // ì§€ë„ ì´ˆê¸°í™” í•¨ìˆ˜
    window.initMap = function initMap() {
      const position = { lat: 37.5665, lng: 126.9780 }; // ì„œìš¸ ì‹œì²­
      const mapCanvas = document.getElementById('map-canvas');
      
      // ì§€ë„ ì»¨í…Œì´ë„ˆê°€ ì—†ìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
      if (!mapCanvas) return;

      // ì´ë¯¸ ì§€ë„ê°€ ìƒì„±ë˜ì—ˆë‹¤ë©´, í¬ê¸°ë§Œ ì¬ì¡°ì •í•˜ê³  ì¤‘ì•™ìœ¼ë¡œ ì´ë™
      if (window.mapInstance) {
        google.maps.event.trigger(window.mapInstance, 'resize');
        window.mapInstance.setCenter(position);
        return;
      }

      // ì§€ë„ ìƒì„± (ì•ˆì •ì ì¸ êµ¬ì‹ ë§ˆì»¤ ì‚¬ìš©)
      const map = new google.maps.Map(mapCanvas, {
        zoom: 14,
        center: position,
      });
      new google.maps.Marker({
        map: map,
        position: position,
        title: 'Seoul City Hall'
      });

      // ìƒì„±ëœ ì§€ë„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
      window.mapInstance = map;
    };

    // ===== Configurable links =====
    const LINKS = { shop: 'https://j-meeshop.com', popup: 'https://example.com/popup' };
    document.querySelectorAll('[data-link]').forEach(a=>{ const key=a.getAttribute('data-link'); if(LINKS[key]) a.href = LINKS[key]; });

    // Time
    const pad=n=>n.toString().padStart(2,'0');
    function fmt(now){ const y=now.getFullYear(); const m=pad(now.getMonth()+1); const d=pad(now.getDate()); const days=['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ']; return {time:`${pad(now.getHours())}:${pad(now.getMinutes())}`, date:`${y}ë…„ ${m}ì›” ${d}ì¼ (${days[now.getDay()]})`}; }
    function tick(){ const now=new Date(); const f=fmt(now); sb_time.textContent=f.time; lock_clock.textContent=f.time; lock_date.textContent=f.date; }
    const sb_time = document.getElementById('sb-time');
    const lock_clock = document.getElementById('lock-clock');
    const lock_date = document.getElementById('lock-date');
    setInterval(tick,1000); tick();

    // ===== Lock â†’ Home: ì•Œë¦¼ ì™¸ ì˜ì—­ íƒ­ or ìœ„ë¡œ ìŠ¤ì™€ì´í”„ =====
    const lockEl=document.getElementById('lock');
    const homeEl=document.getElementById('home');
    const notifStack=document.getElementById('notifStack');

    // ë”ë¯¸ ì•Œë¦¼ ì±„ìš°ê¸° (ìŠ¤í¬ë¡¤ ê°€ëŠ¥)
    const DUMMY = [
      {t:'ê¹€ì¤€ì™„ ì—°ì°¨', d:'8ì›”18ì¼ ì´ì‚¬í•´ì•¼í•¨'},
      {t:'êµ¬ë‚´ ì‹œë‹¹', d:'ì´ë²ˆì£¼ëŠ” ê±°ë¥´ëŠ”ê²Œ ë‹µ'},
      {t:'í†¡', d:'[ê³µì§€] êµ¿ì¦ˆ ì˜ˆíŒ ë§í¬ ì•ˆë‚´'},
      {t:'News', d:'í‹°ì € ì´ë¯¸ì§€ í‹°ì§• (í´ë¦­ ë¶ˆê°€)'},
      {t:'BOM TV', d:'PV ê³µê°œ D-3 Â· í™ˆì—ì„œ í™•ì¸'},
      {t:'Calendar', d:'4/23â€“26 POP-UP'},
      {t:'Notes', d:'â€œhome is where the heart isâ€'},
    ];
    DUMMY.forEach(n=>{
      const el=document.createElement('div');
      el.className='notif';
      el.innerHTML=`<div class="t">${n.t}</div><div class="d">${n.d}</div>`;
      el.addEventListener('click', e=> e.stopPropagation()); // ì ê¸ˆ í•´ì œ ë°©ì§€
      notifStack.appendChild(el);
    });

    // ì•Œë¦¼ ì˜ì—­ ì´ì™¸ í´ë¦­ ì‹œ í•´ì œ
    lockEl.addEventListener('click', (e)=>{
      if (e.target.closest('#notifStack')) return; // ì•Œë¦¼ ë‚´ë¶€ë©´ ë¬´ì‹œ
      unlock();
    });

    // ìœ„ë¡œ ìŠ¤ì™€ì´í”„ í•´ì œ
    let startY=null;
    lockEl.addEventListener('touchstart', e=> startY = e.touches[0].clientY, {passive:true});
    lockEl.addEventListener('touchmove', e=>{
      if(startY===null) return;
      const dy = startY - e.touches[0].clientY;
      if(dy > 40){ unlock(); startY=null; }
    }, {passive:true});
    lockEl.addEventListener('touchend', ()=> startY=null);

    function unlock(){
      // ì• ë‹ˆë©”ì´ì…˜: ì ê¸ˆí™”ë©´ ìœ„ë¡œ ì‚¬ë¼ì§€ê³  í™ˆì€ í˜ì´ë“œ-ì¸
      lockEl.classList.add('unlocking');
      setTimeout(()=>{
        lockEl.style.display='none';
        homeEl.hidden=false;
        requestAnimationFrame(()=> homeEl.classList.add('show'));
      }, 320);
    }

    // ===== Apps open/close (ì•ˆì •í™”ëœ ë²„ì „) =====
    document.querySelectorAll('.app-tile').forEach(button => {
        button.addEventListener('click', () => {
            const appId = button.getAttribute('data-app');
            if (!appId) return;

            const appScreen = document.getElementById(`app-${appId}`);
            if (!appScreen) return;

            appScreen.style.display = 'flex';

            // ì§€ë„ ì•±ì´ ì—´ë¦´ ë•Œë§Œ initMap í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
            if (appId === 'map') {
              // ëª¨ë‹¬ì´ ì‹¤ì œë¡œ í™”ë©´ì— ê·¸ë ¤ì§„ í›„ ì§€ë„ë¥¼ ìƒì„±í•˜ë„ë¡ ì•½ê°„ì˜ ì§€ì—°ì„ ì¤Œ
              requestAnimationFrame(() => {
                  setTimeout(() => window.initMap(), 0);
              });
            }
        });
    });

    document.querySelectorAll('.app-screen').forEach(appScreen => {
        appScreen.addEventListener('click', (event) => {
            if (event.target === appScreen) {
                appScreen.style.display = 'none';
            }
        });
        const closeButton = appScreen.querySelector('[data-close]');
        if (closeButton) {
            closeButton.addEventListener('click', () => {
                appScreen.style.display = 'none';
            });
        }
    });

    // Gallery lightbox
    const lightbox=document.getElementById('lightbox'); const lightimg=document.getElementById('lightimg');
    document.getElementById('ggrid').addEventListener('click', e=>{ if(e.target.tagName==='IMG'){ lightimg.src=e.target.src; lightbox.style.display='flex'; } });
    lightbox.addEventListener('click', ()=> lightbox.style.display='none');

    // BOM TV PV í† ê¸€
    const pvToggle=document.getElementById('pvToggle');
    const pvBefore=document.getElementById('pvBefore'); const pvAfter=document.getElementById('pvAfter');
    function applyPV(v){ 
      pvBefore.style.display = v ? 'none' : 'grid'; 
      pvAfter.style.display = v ? 'block' : 'none';
    }
    if(pvToggle){ pvToggle.addEventListener('change', e=> applyPV(e.target.checked)); }
    applyPV(false);

    // ===== Share Modal Logic =====
    const shareBtn = document.getElementById('shareBtn');
    const shareModal = document.getElementById('shareModal');
    const closeShareBtn = document.getElementById('closeShareBtn');
    const shareTwitter = document.getElementById('shareTwitter');

    if(shareBtn) {
      shareBtn.addEventListener('click', () => {
        shareModal.style.display = 'flex';
      });
    }

    function closeShareModal() {
      shareModal.style.display = 'none';
    }

    closeShareBtn.addEventListener('click', closeShareModal);

    shareModal.addEventListener('click', (e) => {
      if (e.target === shareModal) {
        closeShareModal();
      }
    });

    shareTwitter.addEventListener('click', (e) => {
      e.preventDefault();
      const shareText = "ê¹€ë¹ ì§€ê²Œ ëª»í•˜ê² ë‹¨ ì†Œë¦¬ í•˜ì§€ë§ˆë¼ \në„ì „ í•˜ëŠ”ê²Œ ì¤‘ìš” í•œê±°ë‹¤\ní˜¸ê¸°ë¡­ê²Œ ì‹œì‘í•œ ë§Œí¼ ëê¹Œì§€ í•´ë³´ì";
      const shareUrl = window.location.href;
      const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
      window.open(twitterUrl, '_blank', 'width=600,height=400');
    });

    // ESC í‚¤ë¡œ ì•± ë˜ëŠ” ê³µìœ ì°½ ë‹«ê¸° (ì •ë¦¬ëœ ë²„ì „)
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        if (shareModal && getComputedStyle(shareModal).display !== 'none') {
            closeShareModal();
            return;
        }
        const opens = [...document.querySelectorAll('.app-screen')].filter(s => getComputedStyle(s).display !== 'none');
        const top = opens.at(-1);
        if (top) top.style.display = 'none';
      }
    });
  </script>
</body>
</html>
